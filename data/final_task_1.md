# Итоговое задание №1

### [Назад в Содержание ⤶](/README.md)

## Задача
Необходимо создать свой _Docker_-образ и загрузить его в **Docker Hub**. В  ответе указать ссылку на образ в **DockerHub**.

### Подзадачи
1. Создать свой образ **Docker** с **PostgreSQL**:
   - Имя пользователя _postgres_,  
   - Пароль _postgres_,
   - PostgreSQL 13 версии.
2. Предусмотреть подключение 2-х томов для хранения данных: 
   - один назвать _DE_course_, 
   - второй – как угодно.
3. Загрузить образ в **Docker Hub**.  

## Решение задачи
### Создание репозитория
Чтобы создать репозиторий в **[Docker Hub](https://hub.docker.com/)** необходимо зарегистрироваться.  
Далее необходимо пройти в [Repositories](https://hub.docker.com/repositories/) и нажать кнопку `Create a Repository`.  
Создадим репозиторий *test* и добавим к нему небольшое описание:

<img src="/img/task_1.1.png" width="80%">

После нажатия кнопки `Create` репозиторий будет создан.

### Создание Dockerfile
В **Docker Hub** хранятся образы, поэтому приступим к созданию своего образа.  
Для начала необходимо создать _Docker_-файл с инструкциями для создания _Docker_-образа.

```dockerfile
# Используем официальный образ PostgreSQL версии 13
FROM postgres:13

# Устанавливаем переменные окружения для пользователя и пароля
ENV POSTGRES_USER=adrianhel
ENV POSTGRES_PASSWORD=postgres

# Указываем, что данные будут храниться в этой директории
VOLUME ["/var/lib/postgresql/data"]
```

### Сборка образа
Перейдем в директорию где лежит **Dockerfile**.  
Откроем терминал из данной директории и выполним команду:

```bash
docker build -t adrianhel/test:ver.1.0 .
```

`-t adrianhel/test:ver.1.0` — задаёт имя `adrianhel`, репозиторий `test` и тег `ver.1.0` для образа (по умолчанию 
будет `latest`, если не указать).  
`.` — указывает, что **Dockerfile** находится в текущей директории.  

### Проверка образа
После сборки следует проверить образ. В терминале вводим команду:

```bash
docker images
```

<img src="/img/task_1.2.png" width="50%">

### Загрузка образа
Теперь остается запушить образ на **Docker Hub**. Введем в терминале:

```bash
docker push adrianhel/test:ver.1.0
```

<img src="/img/task_1.3.png" width="70%">

Теперь проверим, появился ли образ в репозитории.

<img src="/img/task_1.4.png" width="80%">

Образ успешно добавлен в репозиторий.

Далее можно нажать на `See all` и в оновившемся окне в правой части увидим ссылку на наш _Docker_-образ:

<img src="/img/task_1.5.png" width="100%">

```bash
docker pull adrianhel/test:ver.1.0
```